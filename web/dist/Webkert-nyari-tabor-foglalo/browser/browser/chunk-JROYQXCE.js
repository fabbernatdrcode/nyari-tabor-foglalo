import{l as z,m as H,n as $,o as A,p as V,q as J,r as K,s as Y,t as q,u as G,v as Q,w as U,x as Z,y as tt,z as nt}from"./chunk-REPPUGPY.js";import"./chunk-YPJCIEVZ.js";import{a as N,b as B,c as I,e as L,g as R}from"./chunk-WAZX23IS.js";import{a as et,b as it}from"./chunk-M2MH6365.js";import{e as P,g as O,h as F}from"./chunk-BPCAL4ZU.js";import{M as j}from"./chunk-GH3LYR2B.js";import{a as W,b as X}from"./chunk-N54XC5ZN.js";import{g as D}from"./chunk-BN2YJQL2.js";import{Db as s,Ib as S,Mb as n,Nb as o,Ob as d,Pb as p,Qb as u,Sb as v,Wb as g,Xb as h,fc as a,gb as l,gc as E,hc as k,lb as _,pc as b,qc as y,sb as T,ta as M,ua as x,vb as w,xb as m}from"./chunk-4Y4LFOUG.js";var f=class e{transform(t){if(!t)return"";try{let i=new Date(t);if(isNaN(i.getTime()))return t;let r=i.getFullYear(),c=String(i.getMonth()+1).padStart(2,"0"),C=String(i.getDate()).padStart(2,"0");return`${r}-${c}-${C}`}catch{return t}}static \u0275fac=function(i){return new(i||e)};static \u0275pipe=w({name:"dateFormatter",type:e,pure:!0})};function rt(e,t){e&1&&(n(0,"div",3),d(1,"mat-spinner",6),n(2,"p"),a(3,"Begy\xFAjtott t\xE1bori jelentkez\xE9seim bet\xF6lt\xE9se..."),o()())}function lt(e,t){e&1&&(n(0,"div",4)(1,"mat-icon"),a(2,"done_all"),o(),n(3,"p"),a(4,"M\xE9g nem jelentkezt\xE9l egy t\xE1borra sem."),o()())}function mt(e,t){e&1&&(n(0,"th",16),a(1,"Task"),o())}function st(e,t){if(e&1&&(n(0,"td",17),a(1),n(2,"div",18),a(3),o()()),e&2){let i=t.$implicit;l(),k(" ",i.name," "),l(2),E(i.description)}}function dt(e,t){e&1&&(n(0,"th",16),a(1,"Kezd\xE9si d\xE1tum"),o())}function ct(e,t){if(e&1&&(n(0,"td",19),a(1),b(2,"dateFormatter"),o()),e&2){let i=t.$implicit;l(),k(" ",y(2,1,i.dueDate)," ")}}function pt(e,t){e&1&&(n(0,"th",16),a(1,"Lehet\u0151s\xE9gek"),o())}function ut(e,t){if(e&1){let i=v();n(0,"td",19)(1,"button",20),g("click",function(){let c=M(i).$implicit,C=h(2);return x(C.deleteTask(c.id))}),n(2,"mat-icon"),a(3,"delete"),o()()()}}function ft(e,t){e&1&&d(0,"tr",21)}function Ct(e,t){e&1&&d(0,"tr",22)}function _t(e,t){e&1&&(n(0,"tr",23)(1,"td",24),a(2,"M\xE9g nem hagyt\xE1k j\xF3v\xE1 jelentkez\xE9sed"),o()())}function gt(e,t){if(e&1&&(n(0,"table",5),p(1,7),m(2,mt,2,0,"th",8)(3,st,4,2,"td",9),u(),p(4,10),m(5,dt,2,0,"th",8)(6,ct,3,3,"td",11),u(),p(7,12),m(8,pt,2,0,"th",8)(9,ut,4,0,"td",11),u(),m(10,ft,1,0,"tr",13)(11,Ct,1,0,"tr",14)(12,_t,3,0,"tr",15),o()),e&2){let i=h();s("dataSource",i.completedTasks),l(10),s("matHeaderRowDef",i.displayedColumns),l(),s("matRowDefColumns",i.displayedColumns)}}var ot=class e{constructor(t,i){this.taskService=t;this.snackBar=i}displayedColumns=["name","date","actions"];completedTasks=[];isLoading=!1;subscription=null;ngOnInit(){this.loadCompletedTasks()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}loadCompletedTasks(){this.isLoading=!0,this.subscription=this.taskService.getCompletedTasks().subscribe({next:t=>{this.completedTasks=t,this.isLoading=!1},error:t=>{console.error("Error loading completed tasks:",t),this.isLoading=!1,this.showNotification("Error loading completed tasks","error")}})}deleteTask(t){confirm("Are you sure you want to delete this task?")&&(this.isLoading=!0,this.taskService.deleteTask(t).then(()=>{this.completedTasks=this.completedTasks.filter(i=>i.id!==t),this.showNotification("Task deleted successfully","success")}).catch(i=>{console.error("Error deleting task:",i),this.showNotification("Failed to delete task","error")}).finally(()=>{this.isLoading=!1}))}clearAllTasks(){confirm("Are you sure you want to delete all completed tasks?")&&(this.isLoading=!0,this.taskService.clearCompletedTasks().then(()=>{this.completedTasks=[],this.showNotification("All completed tasks cleared","success")}).catch(t=>{console.error("Error clearing tasks:",t),this.showNotification("Failed to clear tasks","error")}).finally(()=>{this.isLoading=!1}))}showNotification(t,i){this.snackBar.open(t,"Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:[`snackbar-${i}`]})}static \u0275fac=function(i){return new(i||e)(_(nt),_(Z))};static \u0275cmp=T({type:e,selectors:[["app-completed"]],decls:14,vars:2,consts:[[1,"completed-container"],[1,"spacer"],["mat-raised-button","","color","warn",3,"click","disabled"],[1,"loading-container"],[1,"empty-state"],["mat-table","",1,"mat-elevation-z2",3,"dataSource"],["diameter","40"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","completed-task",4,"matCellDef"],["matColumnDef","date"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell","",1,"completed-task"],[1,"task-description"],["mat-cell",""],["mat-icon-button","","color","warn","aria-label","Delete task",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","3",1,"mat-cell"]],template:function(i,r){i&1&&(n(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),a(4,"J\xF3v\xE1hagyott jelentkez\xE9seim"),o(),d(5,"div",1),n(6,"button",2),g("click",function(){return r.clearAllTasks()}),n(7,"mat-icon"),a(8,"delete_sweep"),o(),a(9," \xD6sszes t\xF6rl\xE9se "),o()(),n(10,"mat-card-content"),m(11,rt,4,0,"div",3)(12,lt,5,0,"div",4)(13,gt,13,3,"table",5),o()()()),i&2&&(l(6),s("disabled",r.completedTasks.length===0||r.isLoading),l(5),S(r.isLoading?11:r.completedTasks.length===0?12:13))},dependencies:[D,j,f,R,N,I,L,B,F,O,P,U,z,$,K,A,H,Y,V,J,q,G,Q,X,W,tt,it,et],styles:[".completed-container[_ngcontent-%COMP%]{max-width:800px;margin:20px auto}mat-card[_ngcontent-%COMP%]{padding:0}mat-card-header[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;display:flex;align-items:center}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-card-content[_ngcontent-%COMP%]{padding:16px}table[_ngcontent-%COMP%]{width:100%}.completed-task[_ngcontent-%COMP%]{text-decoration:line-through;color:#757575}.mat-column-actions[_ngcontent-%COMP%]{width:80px;text-align:center}.mat-column-time[_ngcontent-%COMP%]{width:120px}.mat-column-date[_ngcontent-%COMP%]{width:150px}tr.mat-mdc-row[_ngcontent-%COMP%]:hover{background:#f5f5f5}.mat-mdc-no-data-row[_ngcontent-%COMP%]{text-align:center;font-style:italic;color:#757575;padding:16px 0}"]})};export{ot as CompletedComponent};
