import"./chunk-VN3CQEPZ.js";import{a as K,b as U}from"./chunk-M2MH6365.js";import{g as y,h as F}from"./chunk-BPCAL4ZU.js";import{c as z,e as A,h as B,k as R,l as T,m as q}from"./chunk-2P6VBIEU.js";import{B as P,C as I,E as O,F as f,G as j,H as D,M as N,N as V,v as L,x as k,z as m}from"./chunk-GH3LYR2B.js";import{a as G,b as J}from"./chunk-N54XC5ZN.js";import{g as S,l as E,m as w}from"./chunk-BN2YJQL2.js";import{Db as s,Ib as c,Mb as e,Nb as i,Ob as u,Sb as v,Wb as b,Xb as p,fc as o,gb as a,hc as _,lb as d,oc as M,sb as C,ta as h,ua as x,xb as g}from"./chunk-4Y4LFOUG.js";var W=()=>["/signup"];function X(n,l){n&1&&(e(0,"div",1)(1,"h2"),o(2,"Bejelentkez\xE9s folyamatban"),i(),u(3,"mat-spinner",3),e(4,"p"),o(5,"K\xE9rem v\xE1rjon..."),i()())}function Y(n,l){if(n&1&&(e(0,"div",9),o(1),i()),n&2){let t=p(2);a(),_(" ",t.loginError," ")}}function Z(n,l){if(n&1){let t=v();e(0,"form",4),b("ngSubmit",function(){h(t);let Q=p();return x(Q.login())}),e(1,"mat-form-field",5)(2,"mat-label"),o(3,"E-mail c\xEDm"),i(),u(4,"input",6),e(5,"mat-icon",7),o(6,"email"),i()(),e(7,"mat-form-field",5)(8,"mat-label"),o(9,"Jelsz\xF3"),i(),u(10,"input",8),e(11,"mat-icon",7),o(12,"lock"),i()(),g(13,Y,2,1,"div",9),e(14,"button",10),o(15,"Bejelentkez\xE9s"),i(),e(16,"button",11),o(17,"Regisztr\xE1ci\xF3"),i()()}if(n&2){let t=p();a(4),s("formControl",t.email),a(6),s("formControl",t.password),a(3),c(t.loginError?13:-1),a(3),s("routerLink",M(4,W))}}var H=class n{constructor(l,t){this.authService=l;this.router=t}email=new f("",[m.required,m.email]);password=new f("",[m.required,m.minLength(6)]);isLoading=!1;loginError="";showLoginForm=!0;authSubscription;login(){if(this.email.invalid){this.loginError="Adjon meg egy val\xF3s e-mail c\xEDmet!";return}if(this.password.invalid){this.loginError="A jelsz\xF3nak legal\xE1bb 6 karakterb\u0151l kell \xE1llnia";return}let l=this.email.value||"",t=this.password.value||"";this.isLoading=!0,this.showLoginForm=!1,this.loginError="",this.authService.signIn(l,t).then(r=>{console.log("Login successful:",r.user),this.authService.updateLoginStatus(!0),this.router.navigateByUrl("/home")}).catch(r=>{switch(console.error("Login error:",r),this.isLoading=!1,this.showLoginForm=!0,r.code){case"auth/user-not-found":this.loginError="No account found with this email address";break;case"auth/wrong-password":this.loginError="Incorrect password";break;case"auth/invalid-credential":this.loginError="Invalid email or password";break;default:this.loginError="Authentication failed. Please try again later."}})}ngOnDestroy(){this.authSubscription?.unsubscribe()}static \u0275fac=function(t){return new(t||n)(d(L),d(E))};static \u0275cmp=C({type:n,selectors:[["app-login"]],decls:5,vars:2,consts:[[1,"login-container"],[1,"loading-container"],[1,"login-form"],["diameter","50"],[1,"login-form",3,"ngSubmit"],["appearance","outline"],["matInput","","type","email",3,"formControl"],["matSuffix",""],["matInput","","type","password",3,"formControl"],[1,"error-message"],["mat-flat-button","","color","primary","type","submit"],["mat-flat-button","",3,"routerLink"]],template:function(t,r){t&1&&(e(0,"div",0)(1,"h1"),o(2,"Bejelentkez\xE9s"),i(),g(3,X,6,0,"div",1)(4,Z,18,5,"form",2),i()),t&2&&(a(3),c(r.isLoading?3:-1),a(),c(r.showLoginForm?4:-1))},dependencies:[S,N,j,k,P,I,O,V,D,R,B,z,A,q,T,F,y,J,G,U,K,w],styles:[".login-container[_ngcontent-%COMP%]{max-width:400px;margin:40px auto;padding:20px;border-radius:8px;box-shadow:0 2px 10px #0003;text-align:center}.login-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#3f51b5}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.error-message[_ngcontent-%COMP%]{color:#f44336;margin-bottom:16px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px 0}.loading-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#3f51b5}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:20px;font-size:16px}"]})};export{H as LoginComponent};
