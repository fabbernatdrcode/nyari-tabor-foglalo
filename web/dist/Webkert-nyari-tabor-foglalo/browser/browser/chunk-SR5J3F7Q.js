import{a as nt,b as at,c as ot,d as lt,e as rt,f as Et,g as bt,h as Mt,i as St,j as yt,k as Pt,l as Ot,m as Ft}from"./chunk-ZLRSRYXC.js";import"./chunk-UJSUDVYQ.js";import"./chunk-BOXUDXVQ.js";import{l as st,m as mt,n as dt,o as ct,p as pt,q as _t,r as ut,s as kt,t as ft,u as Ct,v as ht,w as xt,x as vt,y as wt,z as It}from"./chunk-REPPUGPY.js";import"./chunk-YPJCIEVZ.js";import{a as R,b as $,c as H,e as A,g as B}from"./chunk-WAZX23IS.js";import{a as Dt,b as zt}from"./chunk-M2MH6365.js";import{e as N,g as L,h as V}from"./chunk-BPCAL4ZU.js";import{c as U,d as X,e as Y,h as tt,l as et,m as it}from"./chunk-2P6VBIEU.js";import{B as j,C as G,G as W,I as q,K as Z,L as J,N as Q,x as K,z as E}from"./chunk-GH3LYR2B.js";import{a as gt,b as Tt}from"./chunk-N54XC5ZN.js";import{f as F,g as I}from"./chunk-BN2YJQL2.js";import{Db as m,Fb as M,Hb as S,Ib as x,Mb as n,Nb as a,Ob as p,Pb as _,Qb as u,Sb as g,Wb as T,Xb as f,ec as O,fc as o,gb as l,gc as k,hc as y,lb as b,pc as v,rc as w,sb as P,ta as C,ua as h,xb as s,y as z}from"./chunk-4Y4LFOUG.js";function Rt(t,e){t&1&&(n(0,"mat-error"),o(1,"Task name must be at least 3 characters"),a())}function $t(t,e){t&1&&p(0,"mat-spinner",15)}function Ht(t,e){t&1&&o(0," T\xE1bor felv\xE9tele ")}function At(t,e){t&1&&(n(0,"div",20),p(1,"mat-spinner",25),n(2,"p"),o(3,"T\xE1borok bet\xF6lt\xE9se..."),a()())}function Bt(t,e){t&1&&(n(0,"div",21)(1,"mat-icon"),o(2,"assignment"),a(),n(3,"p"),o(4,"M\xE9g nem adt\xE1l hozz\xE1 egy t\xE1bort sem. Vagy ha igen, elveszett...\u{1F914}\uF914"),a()())}function Kt(t,e){t&1&&(n(0,"th",37),o(1,"Status"),a())}function jt(t,e){if(t&1){let i=g();n(0,"td",38)(1,"mat-checkbox",39),T("change",function(){let d=C(i).$implicit,c=f(2);return h(c.toggleTaskCompletion(d))}),a()()}if(t&2){let i=e.$implicit;l(),m("checked",i.completed)}}function Gt(t,e){t&1&&(n(0,"th",37),o(1,"Task"),a())}function Wt(t,e){if(t&1&&(n(0,"td",38)(1,"div"),o(2),a(),n(3,"div",40),o(4),a()()),t&2){let i=e.$implicit;M("completed",i.completed),l(2),k(i.name),l(2),k(i.description)}}function qt(t,e){t&1&&(n(0,"th",37),o(1,"Korosztaly"),a())}function Zt(t,e){if(t&1&&(n(0,"td",38)(1,"span"),o(2),a()()),t&2){let i=e.$implicit;l(),S("korosztaly-chip ",i.korosztaly.toLowerCase(),""),l(),k(i.korosztaly)}}function Jt(t,e){t&1&&(n(0,"th",37),o(1,"Due Date"),a())}function Qt(t,e){if(t&1&&(n(0,"td",38),o(1),v(2,"date"),a()),t&2){let i=e.$implicit;l(),y(" ",w(2,1,i.dueDate,"yyyy-MM-dd")," ")}}function Ut(t,e){t&1&&(n(0,"th",37),o(1,"Actions"),a())}function Xt(t,e){if(t&1){let i=g();n(0,"td",38)(1,"button",41),T("click",function(){let d=C(i).$implicit,c=f(2);return h(c.deleteTask(d.id))}),n(2,"mat-icon"),o(3,"delete"),a()()()}}function Yt(t,e){t&1&&p(0,"tr",42)}function te(t,e){t&1&&p(0,"tr",43)}function ee(t,e){t&1&&(n(0,"tr",44)(1,"td",45),o(2,"No tasks available"),a()())}function ie(t,e){if(t&1&&(n(0,"table",22),_(1,26),s(2,Kt,2,0,"th",27)(3,jt,2,1,"td",28),u(),_(4,29),s(5,Gt,2,0,"th",27)(6,Wt,5,4,"td",30),u(),_(7,31),s(8,qt,2,0,"th",27)(9,Zt,3,4,"td",28),u(),_(10,32),s(11,Jt,2,0,"th",27)(12,Qt,3,4,"td",28),u(),_(13,33),s(14,Ut,2,0,"th",27)(15,Xt,4,0,"td",28),u(),s(16,Yt,1,0,"tr",34)(17,te,1,0,"tr",35)(18,ee,3,0,"tr",36),a()),t&2){let i=f();m("dataSource",i.tasks),l(16),m("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),l(),m("matRowDefColumns",i.displayedColumns)}}function ne(t,e){t&1&&(n(0,"div",20),p(1,"mat-spinner",25),n(2,"p"),o(3,"AI-alap\xFA tracker\xFCnk szerint te a feln\u0151tt koroszt\xE1lyba tartozol. Ezek a sz\xE1modra aj\xE1nlott t\xE1borok."),a()())}function ae(t,e){t&1&&(n(0,"div",21)(1,"mat-icon"),o(2,"korosztaly_high"),a(),n(3,"p"),o(4,"AI-alap\xFA tracker\xFCnk szerint te a feln\u0151tt koroszt\xE1lyba tartozol. Nem tal\xE1ltunk neked megfelel\u0151 t\xE1bort \u{1F641}"),a()())}function oe(t,e){t&1&&(n(0,"th",37),o(1,"Task"),a())}function le(t,e){if(t&1&&(n(0,"td",38)(1,"div"),o(2),a(),n(3,"div",40),o(4),a()()),t&2){let i=e.$implicit;M("completed",i.completed),l(2),k(i.name),l(2),k(i.description)}}function re(t,e){t&1&&(n(0,"th",37),o(1,"Korosztaly"),a())}function se(t,e){if(t&1&&(n(0,"td",38)(1,"span"),o(2),a()()),t&2){let i=e.$implicit;l(),S("korosztaly-chip ",i.korosztaly.toLowerCase(),""),l(),k(i.korosztaly)}}function me(t,e){t&1&&(n(0,"th",37),o(1,"Due Date"),a())}function de(t,e){if(t&1&&(n(0,"td",38),o(1),v(2,"date"),a()),t&2){let i=e.$implicit;l(),y(" ",w(2,1,i.dueDate,"yyyy-MM-dd")," ")}}function ce(t,e){t&1&&(n(0,"th",37),o(1,"Actions"),a())}function pe(t,e){if(t&1){let i=g();n(0,"td",38)(1,"button",41),T("click",function(){let d=C(i).$implicit,c=f(2);return h(c.deleteTask(d.id))}),n(2,"mat-icon"),o(3,"delete"),a()()()}}function _e(t,e){t&1&&p(0,"tr",42)}function ue(t,e){t&1&&p(0,"tr",43)}function ke(t,e){if(t&1&&(n(0,"table",22),_(1,29),s(2,oe,2,0,"th",27)(3,le,5,4,"td",30),u(),_(4,31),s(5,re,2,0,"th",27)(6,se,3,4,"td",28),u(),_(7,32),s(8,me,2,0,"th",27)(9,de,3,4,"td",28),u(),_(10,33),s(11,ce,2,0,"th",27)(12,pe,4,0,"td",28),u(),s(13,_e,1,0,"tr",34)(14,ue,1,0,"tr",35),a()),t&2){let i=f();m("dataSource",i.highKorosztalyTasks),l(13),m("matHeaderRowDef",i.specialDisplayedColumns)("matHeaderRowDefSticky",!0),l(),m("matRowDefColumns",i.specialDisplayedColumns)}}function fe(t,e){t&1&&(n(0,"div",20),p(1,"mat-spinner",25),n(2,"p"),o(3,"Heti t\xE1borok bet\xF6lt\xE9se..."),a()())}function Ce(t,e){t&1&&(n(0,"div",21)(1,"mat-icon"),o(2,"event"),a(),n(3,"p"),o(4,"Nincsenek t\xE1borok ezen a h\xE9ten. Vagy csak nem tudunk r\xF3la \u{1F615}"),a()())}function he(t,e){t&1&&(n(0,"th",37),o(1,"Task"),a())}function xe(t,e){if(t&1&&(n(0,"td",38)(1,"div"),o(2),a(),n(3,"div",40),o(4),a()()),t&2){let i=e.$implicit;M("completed",i.completed),l(2),k(i.name),l(2),k(i.description)}}function ge(t,e){t&1&&(n(0,"th",37),o(1,"Korosztaly"),a())}function Te(t,e){if(t&1&&(n(0,"td",38)(1,"span"),o(2),a()()),t&2){let i=e.$implicit;l(),S("korosztaly-chip ",i.korosztaly.toLowerCase(),""),l(),k(i.korosztaly)}}function Ee(t,e){t&1&&(n(0,"th",37),o(1,"Due Date"),a())}function be(t,e){if(t&1&&(n(0,"td",38),o(1),v(2,"date"),a()),t&2){let i=e.$implicit;l(),y(" ",w(2,1,i.dueDate,"yyyy-MM-dd")," ")}}function Me(t,e){t&1&&(n(0,"th",37),o(1,"Actions"),a())}function Se(t,e){if(t&1){let i=g();n(0,"td",38)(1,"button",41),T("click",function(){let d=C(i).$implicit,c=f(2);return h(c.deleteTask(d.id))}),n(2,"mat-icon"),o(3,"delete"),a()()()}}function ye(t,e){t&1&&p(0,"tr",42)}function ve(t,e){t&1&&p(0,"tr",43)}function we(t,e){if(t&1&&(n(0,"table",22),_(1,29),s(2,he,2,0,"th",27)(3,xe,5,4,"td",30),u(),_(4,31),s(5,ge,2,0,"th",27)(6,Te,3,4,"td",28),u(),_(7,32),s(8,Ee,2,0,"th",27)(9,be,3,4,"td",28),u(),_(10,33),s(11,Me,2,0,"th",27)(12,Se,4,0,"td",28),u(),s(13,ye,1,0,"tr",34)(14,ve,1,0,"tr",35),a()),t&2){let i=f();m("dataSource",i.tasksForNextWeek),l(13),m("matHeaderRowDef",i.specialDisplayedColumns)("matHeaderRowDefSticky",!0),l(),m("matRowDefColumns",i.specialDisplayedColumns)}}var Nt=class t{constructor(e,i,r){this.fb=e;this.taskService=i;this.snackBar=r}title="\xDAj t\xE1bor felv\xE9tele a rendszerbe";displayedColumns=["status","name","korosztaly","dueDate","actions"];specialDisplayedColumns=["name","korosztaly","dueDate","actions"];taskForm;tasks=[];highKorosztalyTasks=[];tasksForNextWeek=[];isLoading=!1;subscriptions=[];ngOnInit(){this.initializeForm(),this.loadAllTaskData()}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}initializeForm(){this.taskForm=this.fb.group({name:["",[E.required,E.minLength(3)]],korosztaly:["High",E.required],dueDate:[new Date,E.required],description:["",E.maxLength(200)]})}loadAllTaskData(){this.isLoading=!0;let e=this.taskService.getAllTasks(),i=this.taskService.getHighKorosztalyPendingTasks(),r=this.taskService.getTasksForNextWeek(),c=z([e,i,r]).subscribe({next:([D,Lt,Vt])=>{this.tasks=D,this.highKorosztalyTasks=Lt,this.tasksForNextWeek=Vt,this.isLoading=!1},error:D=>{console.error("Error loading tasks:",D),this.isLoading=!1,this.showNotification("Error loading tasks","error")}});this.subscriptions.push(c)}addTask(){if(this.taskForm.valid){this.isLoading=!0;let e=this.taskForm.value,i={name:e.name,completed:!1,korosztaly:e.korosztaly,dueDate:e.dueDate,description:e.description||""};this.taskService.addTask(i).then(()=>{this.loadAllTaskData(),this.showNotification("Task added successfully","success"),this.taskForm.reset({korosztaly:"High",dueDate:new Date})}).catch(r=>{console.error("Error adding task:",r),this.showNotification("Failed to add task","error")}).finally(()=>{this.isLoading=!1})}else Object.keys(this.taskForm.controls).forEach(e=>{this.taskForm.get(e)?.markAsTouched()}),this.showNotification("Please fill in all required fields correctly","warning")}toggleTaskCompletion(e){this.isLoading=!0,this.taskService.toggleTaskCompletion(e.id,!e.completed).then(()=>{this.loadAllTaskData();let i=e.completed?"Task marked as pending":"Task marked as completed";this.showNotification(i,"success")}).catch(i=>{console.error("Error updating task:",i),this.showNotification("Failed to update task","error")}).finally(()=>{this.isLoading=!1})}deleteTask(e){confirm("Are you sure you want to delete this task?")&&(this.isLoading=!0,this.taskService.deleteTask(e).then(()=>{this.loadAllTaskData(),this.showNotification("Task deleted successfully","success")}).catch(i=>{console.error("Error deleting task:",i),this.showNotification("Failed to delete task","error")}).finally(()=>{this.isLoading=!1}))}showNotification(e,i){this.snackBar.open(e,"Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:[`snackbar-${i}`]})}static \u0275fac=function(i){return new(i||t)(b(J),b(It),b(vt))};static \u0275cmp=P({type:t,selectors:[["app-tasks"]],decls:60,vars:12,consts:[["picker",""],[1,"task-card"],[1,"task-form",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"task-input"],["matInput","","formControlName","name","placeholder","Pl. Cserk\xE9szt\xE1bor, Erzs\xE9bet-t\xE1bor..."],["appearance","outline",1,"korosztaly-select"],["formControlName","korosztaly"],["value","High"],["value","Medium"],["value","Low"],["appearance","outline",1,"date-picker"],["matInput","","formControlName","dueDate",3,"matDatepicker"],["matSuffix","",3,"for"],["mat-flat-button","","color","primary","type","submit",1,"add-button",3,"disabled"],["diameter","24",1,"spinner-button"],["appearance","outline",1,"full-width"],["matInput","","formControlName","description","rows","2"],["label","A t\xE1boraid"],[1,"table-container"],[1,"loading-container"],[1,"empty-state"],["mat-table","",1,"task-table",3,"dataSource"],["label","T\xE1borok nagyoknak"],["label","T\xE1borok a h\xE9ten"],["diameter","40"],["matColumnDef","status"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["mat-cell","",3,"completed",4,"matCellDef"],["matColumnDef","korosztaly"],["matColumnDef","dueDate"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell",""],["mat-cell",""],["color","primary",3,"change","checked"],[1,"task-description"],["mat-icon-button","","color","warn","aria-label","Delete task",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell"]],template:function(i,r){if(i&1){let d=g();n(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),o(3),a()(),n(4,"mat-card-content")(5,"form",2),T("ngSubmit",function(){return C(d),h(r.addTask())}),n(6,"div",3)(7,"mat-form-field",4)(8,"mat-label"),o(9,"T\xE1bor neve"),a(),p(10,"input",5),s(11,Rt,2,0,"mat-error"),a(),n(12,"mat-form-field",6)(13,"mat-label"),o(14,"Koroszt\xE1ly (nagyj\xE1b\xF3l)"),a(),n(15,"mat-select",7)(16,"mat-option",8),o(17,"4-10"),a(),n(18,"mat-option",9),o(19,"8-15"),a(),n(20,"mat-option",10),o(21,"12-20"),a()()()(),n(22,"div",3)(23,"mat-form-field",11)(24,"mat-label"),o(25,"Kezd\u0151 d\xE1tum"),a(),p(26,"input",12)(27,"mat-datepicker-toggle",13)(28,"mat-datepicker",null,0),a(),n(30,"mat-form-field",11)(31,"mat-label"),o(32,"Z\xE1r\xF3 d\xE1tum"),a(),p(33,"input",12)(34,"mat-datepicker-toggle",13)(35,"mat-datepicker",null,0),a(),n(37,"button",14),s(38,$t,1,0,"mat-spinner",15)(39,Ht,1,0),a()(),n(40,"mat-form-field",16)(41,"mat-label"),o(42,"Le\xEDr\xE1s (nem k\xF6telez\u0151)"),a(),p(43,"textarea",17),a()(),n(44,"mat-tab-group")(45,"mat-tab",18)(46,"div",19),s(47,At,4,0,"div",20)(48,Bt,5,0,"div",21)(49,ie,19,4,"table",22),a()(),n(50,"mat-tab",23)(51,"div",19),s(52,ne,4,0,"div",20)(53,ae,5,0,"div",21)(54,ke,15,4,"table",22),a()(),n(55,"mat-tab",24)(56,"div",19),s(57,fe,4,0,"div",20)(58,Ce,5,0,"div",21)(59,we,15,4,"table",22),a()()()()()}if(i&2){let d,c=O(29);l(3),k(r.title),l(2),m("formGroup",r.taskForm),l(6),x((d=r.taskForm.get("name"))!=null&&d.invalid&&((d=r.taskForm.get("name"))!=null&&d.touched)?11:-1),l(15),m("matDatepicker",c),l(),m("for",c),l(6),m("matDatepicker",c),l(),m("for",c),l(3),m("disabled",r.isLoading),l(),x(r.isLoading?38:39),l(9),x(r.isLoading?47:r.tasks.length===0?48:49),l(5),x(r.isLoading?52:r.highKorosztalyTasks.length===0?53:54),l(5),x(r.isLoading?57:r.tasksForNextWeek.length===0?58:59)}},dependencies:[I,F,Q,W,K,j,G,q,Z,B,R,H,A,$,it,et,tt,U,X,Y,ot,at,nt,V,L,N,rt,lt,xt,st,dt,ut,ct,mt,kt,pt,_t,ft,Ct,ht,Tt,gt,St,Et,bt,Mt,yt,wt,zt,Dt,Ft,Pt,Ot],styles:[".task-card[_ngcontent-%COMP%]{width:800px;margin:20px auto;border-radius:8px;box-shadow:0 2px 8px #00000014}mat-card-header[_ngcontent-%COMP%]{padding:16px 16px 0}mat-card-title[_ngcontent-%COMP%]{font-size:20px;color:#333;font-weight:500;margin-bottom:16px}.task-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;margin-bottom:24px}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-start}.task-input[_ngcontent-%COMP%]{flex:2}.korosztaly-select[_ngcontent-%COMP%], .date-picker[_ngcontent-%COMP%]{flex:1}.full-width[_ngcontent-%COMP%]{width:100%}.add-button[_ngcontent-%COMP%]{margin-top:4px;height:56px}.table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.task-table[_ngcontent-%COMP%]{width:100%;min-width:650px}th.mat-header-cell[_ngcontent-%COMP%]{color:#000000b3;font-weight:500;font-size:14px}.mat-row[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.08)}.completed[_ngcontent-%COMP%]{text-decoration:line-through;color:#999}.task-description[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:4px}.korosztaly-chip[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:16px;font-size:13px;border:1px solid}.korosztaly-chip.high[_ngcontent-%COMP%]{color:#d32f2f;background-color:#d32f2f14;border-color:#d32f2f33}.korosztaly-chip.medium[_ngcontent-%COMP%]{color:#ed6c02;background-color:#ed6c0214;border-color:#ed6c0233}.korosztaly-chip.low[_ngcontent-%COMP%]{color:#2e7d32;background-color:#2e7d3214;border-color:#2e7d3233}.mat-column-status[_ngcontent-%COMP%]{width:70px}.mat-column-korosztaly[_ngcontent-%COMP%]{width:120px;text-align:center}.mat-column-dueDate[_ngcontent-%COMP%]{width:120px}.mat-column-actions[_ngcontent-%COMP%]{width:70px;text-align:center}@media (max-width: 850px){.task-card[_ngcontent-%COMP%]{width:95%}.form-row[_ngcontent-%COMP%]{flex-direction:column}.task-input[_ngcontent-%COMP%], .korosztaly-select[_ngcontent-%COMP%], .date-picker[_ngcontent-%COMP%], .add-button[_ngcontent-%COMP%]{width:100%}.task-table[_ngcontent-%COMP%]{display:block;overflow-x:auto;white-space:nowrap}.mat-column-name[_ngcontent-%COMP%]{min-width:200px}.task-description[_ngcontent-%COMP%]{white-space:normal;max-width:250px}}@media (max-width: 480px){.task-table[_ngcontent-%COMP%]{font-size:14px}.mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%]{padding:8px 4px}.korosztaly-chip[_ngcontent-%COMP%]{padding:2px 8px;font-size:11px}.mat-column-name[_ngcontent-%COMP%]{min-width:150px}.task-description[_ngcontent-%COMP%]{max-width:150px}}"]})};export{Nt as TasksComponent};
