<!-- C:\VSCodeProjects\Webkert-nyari-tabor-foglalo4\src\app\pages\home\home.component.html -->More actions
<div class="container">
  <h1>√údv√∂zl√ºnk a Ny√°ri T√°bor Foglal√≥ honlapj√°n!</h1>
  <p>Itt b√∂ng√©szhetsz t√°borokat, regisztr√°lhatsz, vagy kezelheted a profilod.</p>
  <button mat-flat-button color="primary" class="tasks" (click)="changePage()">Jelentkez√©seim megtekint√©se</button>

  @if (!isLoggedIn) {
  <button mat-flat-button color="accent" [routerLink]="['/login']" class="tasks">Bejelentkez√©s</button>
  }

  @if (isLoggedIn) {
  <button mat-flat-button color="accent" [routerLink]="['/profile']" class="tasks">Profilom</button>
  }
</div>

<!-- Recommended Camps Section -->
<section class="recommended-camps">
  <h2 class="section-title">Aj√°nlott t√°borok</h2>
  <div class="camp-cards">
    <div class="camp-card">
      <div class="camp-icon">üèïÔ∏è</div>
      <h3>Cserk√©szt√°bor</h3>
      <p class="urgent">M√°r csak 2 napig lehet jelentkezni!</p>
    </div>

    <div class="camp-card">
      <div class="camp-icon">‚õµ</div>
      <h3>Vitorl√°st√°bor</h3>
      <p>A Balaton-parti piarista sz√°ll√≥ban!</p>
    </div>

    <div class="camp-card">
      <div class="camp-icon">‚õ∑Ô∏è</div>
      <h3>S√≠t√°bor</h3>
      <p class="price">69 990 Ft</p>
      <p>Helysz√≠n: Magas-T√°tra</p>
    </div>

    <div class="camp-card">
      <div class="camp-icon">üå≤</div>
      <h3>Erzs√©bett√°bor</h3>
      <p>Helysz√≠nek: Z√°nka, Fony√≥dliget, Zalaszabar, Madarasi Hargita</p>
    </div>
  </div>
</section>

<!-- Camp Types Section -->
<div style="background-color: lightgreen; border-radius: 30vw; display: flex; align-items: center;">
  <section class="section camp-types">
    <div class="section-container">
      <h2 class="section-title">T√°bor t√≠pusok felfedez√©se</h2>
      <div class="type-cards">
        <a routerLink="/camp-types/sport" class="type-card">
          <div class="type-icon sport-icon"></div>
          <h3>Sport t√°borok</h3>
        </a>
        <a routerLink="/camp-types/art" class="type-card">
          <div class="type-icon art-icon"></div>
          <h3>M≈±v√©szeti t√°borok</h3>
        </a>
        <a routerLink="/camp-types/science" class="type-card">
          <div class="type-icon science-icon"></div>
          <h3>Tudom√°nyos t√°borok</h3>
        </a>
        <a routerLink="/camp-types/scout" class="type-card">
          <div class="type-icon scout-icon"></div>
          <h3>Cserk√©szt√°borok</h3>
        </a>
        <a routerLink="/camp-types/hiking" class="type-card">
          <div class="type-icon hiking-icon"></div>
          <h3>Erdei v√°ndort√°borok</h3>
        </a>
        <a routerLink="/camp-types/sailing" class="type-card">
          <div class="type-icon sailing-icon"></div>
          <h3>Vitorl√°st√°borok</h3>
        </a>
        <a routerLink="/camp-types/dance" class="type-card">
          <div class="type-icon dance-icon"></div>
          <h3>T√°nct√°borok</h3>
        </a>
        <a routerLink="/camp-types/drama" class="type-card">
          <div class="type-icon drama-icon"></div>
          <h3>Sz√≠nj√°tsz√≥t√°borok</h3>
        </a>
        <a routerLink="/camp-types/religion" class="type-card">
          <div class="type-icon religion-icon"></div>
          <h3>Hittant√°borok</h3>
        </a>
        <a routerLink="/camp-types/programming" class="type-card">
          <div class="type-icon programming-icon"></div>
          <h3>Programoz√≥ t√°borok</h3>
        </a>
        <a routerLink="/camp-types/math" class="type-card">
          <div class="type-icon math-icon"></div>
          <h3>Matek t√°borok</h3>
        </a>
        <a routerLink="/camp-types/robotics" class="type-card">
          <div class="type-icon robotics-icon"></div>
          <h3>Robotika t√°borok</h3>
        </a>
        <a routerLink="/camp-types" class="type-card view-all">
          <div class="type-icon browse-icon"></div>
          <h3>√ñsszes t√°bor t√≠pus</h3>
        </a>
      </div>
    </div>
  </section>
</div>

<!-- Gallery Types Section -->
<section class="gallery-section large-margin-green">
  <app-gallery></app-gallery>
</section>

<section class="giga-draft-camp-wrapper">
  <h2>üèïÔ∏è Saj√°t T√°bor Piszkozat K√©sz√≠t≈ë</h2>
    <div class="draft-camp-container">
        <div class="header">
            <p>Tervezd meg a t√∂k√©letes t√°boroz√°si √©lm√©nyt</p>
        </div>
        
        <div class="form-container">
            <h2 id="formTitle" class="form-title">√öj T√°bor Tervezv√©ny L√©trehoz√°sa</h2>
            <form id="draftCampForm">
                <input type="hidden" id="editingId" value="">
                
                <div class="form-group">
                    <label for="campName">T√°bor Neve</label>
                    <input type="text" id="campName" name="campName" placeholder="Add meg a t√°bor nev√©t..." required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="campType">T√°bor T√≠pusa</label>
                        <select id="campType" name="campType" required>
                            <option value="">V√°lassz t√°bor t√≠pust</option>
                            <option value="adventure">Kalandt√°bor</option>
                            <option value="family">Csal√°di T√°bor</option>
                            <option value="wilderness">Vadon T√°bor</option>
                            <option value="youth">Ifj√∫s√°gi T√°bor</option>
                            <option value="retreat">Elvonul√≥ T√°bor</option>
                            <option value="sport">Sport T√°bor</option>
                            <option value="language">Nyelvi T√°bor</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="duration">Id≈ëtartam (nap)</label>
                        <input type="number" id="duration" name="duration" min="1" max="30" placeholder="7" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="maxParticipants">Max. R√©sztvev≈ëk</label>
                        <input type="number" id="maxParticipants" name="maxParticipants" min="1" max="500" placeholder="20" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="location">Helysz√≠n</label>
                        <input type="text" id="location" name="location" placeholder="T√°bor helysz√≠ne..." required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="description">T√°bor Le√≠r√°sa</label>
                    <textarea id="description" name="description" placeholder="√çrd le a t√°bor tev√©kenys√©geit, c√©ljait √©s azt, ami k√ºl√∂nlegess√© teszi..." required></textarea>
                </div>
                
                <button type="submit" id="submitBtn" class="create-btn">
                    Tervezv√©ny L√©trehoz√°sa
                </button>
                
                <button type="button" id="cancelBtn" class="cancel-btn" style="display: none;">
                    Szerkeszt√©s Megszak√≠t√°sa
                </button>
            </form>
            
            <div id="successMessage" class="success-message">
                <h3 id="successTitle">üéâ T√°bor Tervezv√©ny Sikeresen L√©trehozva!</h3>
                <p id="successText">A tervezv√©nyedet elmentett√ºk √©s b√°rmikor szerkesztheted.</p>
            </div>
            
            <div id="draftsList" class="draft-list" style="display: none;">
                <h2>üìù T√°bor Tervezv√©nyeid</h2>
            </div>
        </div>
    </div>

    <!-- T√∂rl√©s meger≈ës√≠t≈ë modal -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <h2>Tervezv√©ny T√∂rl√©se</h2>
            <p>Biztosan t√∂r√∂lni szeretn√©d ezt a t√°bor tervezv√©nyt?<br><strong id="deleteModalCampName"></strong></p>
            <div class="modal-buttons">
                <button id="confirmDelete" class="confirm-btn">Igen, T√∂rl√∂m</button>
                <button id="cancelDelete" class="cancel-modal-btn">M√©gsem</button>
            </div>
        </div>
    </div>
    <script>
        // T√°bor tervezv√©nyek t√°rol√°sa
        let draftCamps = [];
        let draftIdCounter = 1;
        let editingCampId = null;
        let campToDelete = null;

        // DOM elemek
        const form = document.getElementById('draftCampForm');
        const successMessage = document.getElementById('successMessage');
        const successTitle = document.getElementById('successTitle');
        const successText = document.getElementById('successText');
        const draftsList = document.getElementById('draftsList');
        const formTitle = document.getElementById('formTitle');
        const submitBtn = document.getElementById('submitBtn');
        const cancelBtn = document.getElementById('cancelBtn');
        const editingIdInput = document.getElementById('editingId');
        const deleteModal = document.getElementById('deleteModal');
        const deleteModalCampName = document.getElementById('deleteModalCampName');
        const confirmDeleteBtn = document.getElementById('confirmDelete');
        const cancelDeleteBtn = document.getElementById('cancelDelete');

        // T√°bor t√≠pusok magyar ford√≠t√°sai
        const campTypeTranslations = {
            'adventure': 'Kalandt√°bor',
            'family': 'Csal√°di T√°bor',
            'wilderness': 'Vadon T√°bor',
            'youth': 'Ifj√∫s√°gi T√°bor',
            'retreat': 'Elvonul√≥ T√°bor',
            'sport': 'Sport T√°bor',
            'language': 'Nyelvi T√°bor'
        };

        // Form bek√ºld√©s kezel≈ë
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Form adatok beszerz√©se
            const formData = new FormData(form);
            const campData = {
                id: editingCampId || draftIdCounter++,
                name: formData.get('campName'),
                type: formData.get('campType'),
                duration: formData.get('duration'),
                maxParticipants: formData.get('maxParticipants'),
                location: formData.get('location'),
                description: formData.get('description'),
                createdAt: editingCampId ? 
                    draftCamps.find(camp => camp.id === editingCampId).createdAt : 
                    new Date().toLocaleDateString('hu-HU'),
                modifiedAt: editingCampId ? new Date().toLocaleDateString('hu-HU') : null,
                status: 'draft'
            };
            
            if (editingCampId) {
                // Megl√©v≈ë t√°bor friss√≠t√©se
                const index = draftCamps.findIndex(camp => camp.id === editingCampId);
                draftCamps[index] = campData;
                showSuccessMessage('üîÑ T√°bor Tervezv√©ny Sikeresen Friss√≠tve!', 'A v√°ltoztat√°sokat elmentett√ºk.');
                resetEditingMode();
            } else {
                // √öj t√°bor hozz√°ad√°sa
                draftCamps.push(campData);
                showSuccessMessage('üéâ T√°bor Tervezv√©ny Sikeresen L√©trehozva!', 'A tervezv√©nyedet elmentett√ºk √©s b√°rmikor szerkesztheted.');
            }
            
            // Tervezv√©nyek lista friss√≠t√©se
            updateDraftsList();
            
            // Form vissza√°ll√≠t√°sa
            form.reset();
            
            // Vizu√°lis visszajelz√©s
            animateSubmission();
        });

        // Szerkeszt√©s megszak√≠t√°sa
        cancelBtn.addEventListener('click', function() {
            resetEditingMode();
            form.reset();
        });

        // T√∂rl√©s modal kezel≈ëk
        confirmDeleteBtn.addEventListener('click', function() {
            if (campToDelete) {
                const index = draftCamps.findIndex(camp => camp.id === campToDelete.id);
                draftCamps.splice(index, 1);
                updateDraftsList();
                showSuccessMessage('üóëÔ∏è T√°bor Tervezv√©ny T√∂r√∂lve!', 'A tervezv√©nyt sikeresen elt√°vol√≠tottuk.');
                closeDeleteModal();
            }
        });

        cancelDeleteBtn.addEventListener('click', closeDeleteModal);

        // Modal bez√°r√°sa h√°tt√©rre kattint√°skor
        deleteModal.addEventListener('click', function(e) {
            if (e.target === deleteModal) {
                closeDeleteModal();
            }
        });

        function showSuccessMessage(title, text) {
            successTitle.textContent = title;
            successText.textContent = text;
            successMessage.classList.add('show');
            setTimeout(() => {
                successMessage.classList.remove('show');
            }, 3000);
        }

        function updateDraftsList() {
            if (draftCamps.length === 0) {
                draftsList.style.display = 'none';
                return;
            }
            
            draftsList.style.display = 'block';
            
            const draftsHtml = draftCamps.map(camp => `
                <div class="draft-item" data-id="${camp.id}">
                    <div class="action-buttons">
                        <button class="edit-btn" onclick="editCamp(${camp.id})">Szerkeszt√©s</button>
                        <button class="delete-btn" onclick="showDeleteModal(${camp.id})">T√∂rl√©s</button>
                    </div>
                    <h3>${camp.name}</h3>
                    <p><strong>Helysz√≠n:</strong> ${camp.location}</p>
                    <p><strong>Id≈ëtartam:</strong> ${camp.duration} nap</p>
                    <p><strong>Max. r√©sztvev≈ëk:</strong> ${camp.maxParticipants} f≈ë</p>
                    <p><strong>L√©trehozva:</strong> ${camp.createdAt}</p>
                    ${camp.modifiedAt ? `<p><strong>Utolj√°ra m√≥dos√≠tva:</strong> ${camp.modifiedAt}</p>` : ''}
                    <p><strong>Le√≠r√°s:</strong> ${camp.description.substring(0, 100)}${camp.description.length > 100 ? '...' : ''}</p>
                    <span class="camp-type-badge">${campTypeTranslations[camp.type] || camp.type}</span>
                </div>
            `).join('');
            
            draftsList.innerHTML = '<h2>üìù T√°bor Tervezv√©nyeid</h2>' + draftsHtml;
        }

        function editCamp(campId) {
            const camp = draftCamps.find(c => c.id === campId);
            if (!camp) return;
            
            // Form kit√∂lt√©se a t√°bor adataival
            document.getElementById('campName').value = camp.name;
            document.getElementById('campType').value = camp.type;
            document.getElementById('duration').value = camp.duration;
            document.getElementById('maxParticipants').value = camp.maxParticipants;
            document.getElementById('location').value = camp.location;
            document.getElementById('description').value = camp.description;
            
            // Szerkeszt√©si m√≥d be√°ll√≠t√°sa
            editingCampId = campId;
            editingIdInput.value = campId;
            formTitle.textContent = 'T√°bor Tervezv√©ny Szerkeszt√©se';
            submitBtn.textContent = 'Tervezv√©ny Friss√≠t√©se';
            submitBtn.className = 'update-btn';
            cancelBtn.style.display = 'block';
            
            // Form kiemel√©se
            form.classList.add('editing-mode');
            
            // G√∂rget√©s a form tetej√©re
            form.scrollIntoView({ behavior: 'smooth' });
        }

        function showDeleteModal(campId) {
            const camp = draftCamps.find(c => c.id === campId);
            if (!camp) return;
            
            campToDelete = camp;
            deleteModalCampName.textContent = camp.name;
            deleteModal.style.display = 'block';
        }

        function closeDeleteModal() {
            deleteModal.style.display = 'none';
            campToDelete = null;
        }

        function resetEditingMode() {
            editingCampId = null;
            editingIdInput.value = '';
            formTitle.textContent = '√öj T√°bor Tervezv√©ny L√©trehoz√°sa';
            submitBtn.textContent = 'Tervezv√©ny L√©trehoz√°sa';
            submitBtn.className = 'create-btn';
            cancelBtn.style.display = 'none';
            form.classList.remove('editing-mode');
        }

        function animateSubmission() {
            const button = submitBtn;
            const originalText = button.textContent;
            
            if (editingCampId) {
                button.textContent = '‚úì Friss√≠t√©s...';
            } else {
                button.textContent = '‚úì L√©trehoz√°s...';
            }
            
            setTimeout(() => {
                button.textContent = originalText;
            }, 2000);
        }

        // Interakt√≠v funkci√≥k
        document.addEventListener('DOMContentLoaded', function() {
            // Textarea automatikus m√©retez√©se
            const textarea = document.getElementById('description');
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = this.scrollHeight + 'px';
            });
            
            // Minta tervezv√©ny hozz√°ad√°sa bemutat√≥ c√©lb√≥l
            setTimeout(() => {
                if (draftCamps.length === 0) {
                    draftCamps.push({
                        id: draftIdCounter++,
                        name: 'Minta Kalandt√°bor',
                        type: 'adventure',
                        duration: '5',
                        maxParticipants: '25',
                        location: 'M√°tra Hegys√©g',
                        description: 'Izgalmas kalandt√°bor t√∫r√°z√°ssal, sziklam√°sz√°ssal √©s t√∫l√©l√©si technik√°kkal a term√©szetben.',
                        createdAt: new Date().toLocaleDateString('hu-HU'),
                        modifiedAt: null,
                        status: 'draft'
                    });
                    updateDraftsList();
                }
            }, 1000);
        });

        // Vizu√°lis fejleszt√©sek
        const inputs = document.querySelectorAll('input, textarea, select');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement.style.transform = 'scale(1.02)';
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'scale(1)';
            });
        });

        // Glob√°lis f√ºggv√©nyek a HTML-b≈ël t√∂rt√©n≈ë h√≠v√°shoz
        window.editCamp = editCamp;
        window.showDeleteModal = showDeleteModal;
    </script>
  </section>

<!-- Footer Section -->
<section class="footer-section">
  <app-footer></app-footer>